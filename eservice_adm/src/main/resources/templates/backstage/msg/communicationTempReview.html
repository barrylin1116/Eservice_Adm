<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>communicationTempReview</title>
<link rel="stylesheet" type="text/css" th:href="@{/css/style.css}" />
<script th:src="@{/js/jquery-3.1.0.min.js}"></script>
<script th:src="@{/js/angular.min.js}"></script>
<script type="text/javascript">
/*<![CDATA[*/
	var messagingTemplateId	= request("messagingTemplateId");
	var status = request("status");
	var type = request("type");
	var dateTime = request("dateTime");
		jQuery(function($) {
			var data = {
					messagingTemplateId : messagingTemplateId,
					status : status,
					type : type,
					startDate : dateTime
			}
			$.ajax({
				type : 'POST',
				contentType : 'application/json',
				url : "/eservice_adm/communctionTemp/reviewMessagingTemplate",
				data : JSON.stringify(data),
				success : function(response) {
					if (response.result != 'SUCCESS') {
						alert(response.resultMsg);
					}else{
						alert("審核完成!");
					}
				},
				error : function() {
					alert('error!')
				}
			});
		});
		
		//取得參數
		function request(paras){   
	        var url = location.href;   
	        var paraString = url.substring(url.indexOf("?")+1,url.length).split("&");   
	        var paraObj = {}   
	        for (i=0; j=paraString[i]; i++){   
	            paraObj[j.substring(0,j.indexOf("=")).toLowerCase()] = j.substring(j.indexOf("=")+1,j.length);   
	        }   
	        var returnValue = paraObj[paras.toLowerCase()];   
	        if(typeof(returnValue)=="undefined"){   
	            return "";   
	        }else{   
	            return returnValue;   
	        }
		}
/*]]>*/
</script>
</head>
<body>
</body>
</html>
